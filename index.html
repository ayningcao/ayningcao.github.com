<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <title>8090事</title>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">8090事</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">住房贷款</a></li>
                <li><a href="#about">公积金</a></li>
                <li><a href="#contact">社保</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">其它<span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#">房贷计算器</a></li>
                        <li><a href="#">公积金</a></li>
                        <li><a href="#">社保</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-header">Nav header</li>
                        <li><a href="#">Separated link</a></li>
                        <li><a href="#">One more separated link</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</nav>
<div class="container" style="margin-top: 70px;">
    <div class="row">
        <div class="col-md-6 col-xs-12">
            <form class="form-horizontal" role="form">
                <div class="form-group">
                    <label for="byLoanAmt" class="col-md-3 control-label">计算方式: </label>

                    <div class="col-md-6">
                        <label class="radio-inline">
                            <input type="radio" name="calculateType" id="byArea" value="byArea" disabled> 按面积算
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="calculateType" id="byLoanAmt" value="byLoanAmt" checked disabled>
                            按贷款总额算
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="totalLoanAmt" class="col-md-3 control-label">贷款总额: </label>

                    <div class="col-md-6">
                        <div class="input-group">
                            <input type="text" class="form-control" id="totalLoanAmt" placeholder="贷款总额">
                            <span class="input-group-addon">万元</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="loanYears" class="col-md-3 control-label">贷款年限: </label>

                    <div class="col-md-6">
                        <select class="form-control" id="loanYears">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30" selected="selected">30</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="interest" class="col-md-3 control-label">商贷利率: </label>

                    <div class="col-md-6">
                        <select class="form-control" id="interest" onchange="calculateActualInterest();">
                            <option value="490" selected="selected">最新利率 - 4.9%</option>
                            <option value="515">2015-08-26基准利率 - 5.15%</option>
                            <option value="540">2015-06-28基准利率 - 5.4%</option>
                            <option value="565">2015-06-28基准利率 - 5.65%</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="interestDiscount" class="col-md-3 control-label">利率折扣: </label>

                    <div class="col-md-6">
                        <select class="form-control" id="interestDiscount" onchange="calculateActualInterest();">
                            <option value="1.2">1.2倍</option>
                            <option value="1.1">1.1倍</option>
                            <option value="1.0" selected="selected">无折扣</option>
                            <option value="0.95">最新95折</option>
                            <option value="0.9">9折</option>
                            <option value="0.85">85折</option>
                            <option value="0.8">8折</option>
                            <option value="0.75">75折</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="actualInterest" class="col-md-3 control-label">实际利率: </label>

                    <div class="col-md-6">
                        <input type="text" class="form-control" id="actualInterest">
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-3 col-md-6">
                        <button type="submit" class="btn btn-primary" id="submitBtn" onclick="calcluateLoan(); return false;">开始计算</button>
                        <button type="reset" class="btn btn-danger">清空重填</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-md-6 col-xs-12">
            <div id="monthRepayAmt"></div>
        </div>
    </div>
</div>
<script src="//cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
    $(function(){
        var $actualInterest = $("#actualInterest");
        var $interest = $("#interest");
        var $byArea = $("#byArea");
        var $byLoanAmt = $("#byLoanAmt");
        var $totalLoanAmt = $("#totalLoanAmt");
        var $loanYears = $("#loanYears");
        var $interestDiscount = $("#interestDiscount");
        var $submitBtn = $("#submitBtn");

        calculateActualInterest();

    });

    function calculateActualInterest() {
        var amt = $("#interest").val() * $("#interestDiscount").val() / 100;
        $("#actualInterest").val(amt + "%");
    }

    function calcluateLoan() {
        var totalAmt = $("#totalLoanAmt").val() * 10000;    // 贷款总额, 单位元
        var interest = $("#interest").val() * $("#interestDiscount").val() / (12 * 10000); // 月利率
        var loanYears = $("#loanYears").val();  // 贷款年限
        var monthRepayAmt = totalAmt * interest * Math.pow((1 + interest), loanYears * 12) / (Math.pow(1 + interest, loanYears * 12) - 1);
        $("#monthRepayAmt").html(Math.round(parseFloat(monthRepayAmt) * 100) / 100 + "元");
    }
</script>
</body>
</html>